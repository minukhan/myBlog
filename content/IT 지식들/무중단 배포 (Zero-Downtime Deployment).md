
### 무중단 배포란?

- 서비스에 다운타임이 발생하지 않음.
- 새로운 버전의 애플리케이션을 서버에 배포하는걸 의미

### 종류? 

- 순차적으로 배포하는 롤링배포
- 전체 서버를 통채로 바꾸는 블루/그린 배포
- 트래픽을 순차적으로 이동시키는 카나리 배포


### 롤링배포 

- 서버를 한 대씩 순차적으로 업데이트하는 가장 기본적인 방식.
- 특정 시점에는 2가지 버전의 서버가 공존하기 떄문에 새로운 버전은 기존 버전 기능을 지원하는 하위 호완성에 신경을 써야한다함. 
- 롤링배포는 새로운 버전을 배포하기 위해서 새로운 서버를 생성하지 않음.
- 배포가 진행중인 서버는 요청 처리가 불가해서 다른 서버에 전달되는 트래픽이 증가할 수 있음. 

-> 그냥 서버를 2개 이상을 두어서 하나 배포하고있으면 나머지 하나로 서버를 돌리는것.
### 블루/그린 배포

**블루/그린 배포**는 크게 두 가지 환경(서버 집합)을 둡니다:

- **Blue 환경:** 현재 운영 중인 서버 (예: 기존 버전)
- **Green 환경:** 새 버전을 배포할 서버
##### **Green 환경에 새 버전 배포 완료**
    - 새 버전이 제대로 작동하는지 테스트 가능
- **트래픽을 Blue에서 Green으로 전환 (스위칭)**
    
    - 실제 사용자 요청이 새 버전 서버(Green)로 넘어감
        
- **Blue 환경을 ‘폐기’ 또는 ‘대기 상태’로 둠**
    
    - 여기서 ‘폐기’는 **사용자 요청을 더 이상 받지 않는다**는 의미예요.
    - 하지만 실제 서버는 즉시 삭제하지 않고, **만약 문제가 생기면 바로 이전 버전으로 돌아가려고 그대로 둔다**는 뜻입니다.

### 카나리 배포

- 기존 버전 서버와 새 버전 서버를 **동시에 운영**하면서
- 전체 트래픽을 일정 비율로 나누어 점진적으로 새 버전 서버로 트래픽을 전환하는 방식

| 배포 방식    | 서버 준비   | 트래픽 전환    | 버전 공존 기간   | 롤백 편의성 | 특징           |
| -------- | ------- | --------- | ---------- | ------ | ------------ |
| 롤링배포     | 기존 서버만  | 순차적 서버 단위 | O (서버 단위)  | 중간 수준  | 서버 한 대씩 업데이트 |
| 카나리배포    | 기존 + 신규 | 트래픽 비율 조절 | O (트래픽 비율) | 매우 편함  | 점진적 트래픽 전환   |
| 블루/그린 배포 | 기존 + 신규 | 한번에 전환    | 없음 (스위칭 후) | 매우 편함  | 두 환경 완전 분리   |


## 어떤 상황에 각 배포전략을 선택해야할까?

- 만약 서버 비용을 감수하기 어렵다면 롤링배포전략
- 대규모 업데이트, 중요한 변화가 있을경우 비용을 감수하고 블루/그린 배포
- 성능, 오류율 같은 통계적으로 무언가 확인하고 싶은 것이 있을경우 카나리 배포.