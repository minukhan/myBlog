
### JVM 에서 GC 대상 객체를 판단하는 기준 ?

- [[GC(Garbage Collection)]] 는 자바의 메모리 관리 방법의 하나. 
- JVM의 힙 영역에서 동적으로 할당했던 메모리 중에서 필요없어진 객체를 주기적으로 제거하는 걸 말함. 

- GC는 객체가 사용중인지 아닌지 판단하기 위해서 도달 가능성 이라는 개념을 사용한다. 
- 특정 객체에 대한 참조가 존재하면 도달할 수 있다. 
- 만약 참조가 존재하지 않는 경우에 도달할 수 없는 상태로 간주하고 GC 의 대상으로 설정. 

### 도달가능성은 어떻게 판단해?

- 힙 영역에 있는 객체에 대한 참조는 4가지가 존재한다. 

1. **스택 변수에서의 참조**
    - 로컬 변수, 메서드 파라미터 등
2. **정적 변수(static)** 에 의한 참조
    - 클래스 로더에 의해 로드된 클래스의 static 필드
3. **[[JNI (Java Native Interface)]] 네이티브 참조**
    - 자바 외부의 네이티브 코드(C, C++)에서 객체 참조
4. **힙 내부 객체 간 참조**
    - 서로 참조하는 객체들

### GC의 시작? [[Root Set]]

> GC는 Root Set 이라고 불리는 참조 지점에서 출발해서 객체 그래프를 탐색한다. 


### 개발자가 GC 대상 판단에 관여할 수 있나??

- 가능하다!
- 자바는 `java.lang.ref` 패키지를 통해 **약한 참조(Reference)**를 지원합니다.

```
Origin o = new Origin(); 
WeakReference<Origin> wo = new WeakReference<>(o);
```
- `wo`는 `o`를 약한 참조로 감싸고 있음
- 만약 `o`에 대한 다른 강한 참조가 없다면 → GC는 `o`를 **즉시 수거 가능**