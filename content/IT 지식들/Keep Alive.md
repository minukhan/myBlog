
## Keep-Alive란?

> **Keep-Alive**는 클라이언트와 서버 간의 **네트워크 연결(커넥션)을 일정 시간 이상 유지**하기 위한 기술이에요.

두 가지 주요 맥락에서 사용됩니다:

1. **HTTP Keep-Alive** (애플리케이션 레벨)
2. **TCP Keep-Alive** (전송 계층, OS 레벨)


## 1. HTTP Keep-Alive

### 설명

- 기본적으로 HTTP 요청은 TCP 커넥션을 통해 이루어지는데,
- **HTTP/1.0**에선 매 요청마다 **새로운 TCP 연결을 열고 닫음**
- **HTTP/1.1**부터는 기본적으로 **Keep-Alive가 활성화되어**,  
    **하나의 TCP 커넥션으로 여러 HTTP 요청/응답을 처리** 가능
###  장점

- 커넥션 재사용 → 성능 향상
- TCP 연결 비용(RTT, 리소스)을 절감
- 빠른 응답 처리 가능

### 동작 방식

- 커넥션이 일정 시간 요청 없이 유지되다가 → 타임아웃 되면 끊어짐
- 클라이언트와 서버는 응답 헤더로 Keep-Alive 설정 가능

## 2. TCP Keep-Alive

### 설명

> "상대방이 아직 살아있는지 확인하는 목적"이에요.

- TCP 레벨에서의 **유휴 커넥션 관리 메커니즘**
- 클라이언트와 서버 사이 TCP 커넥션이 **오래 사용되지 않더라도 끊기지 않도록**,  
    **주기적으로 패킷을 보내서 살아 있는지 확인**

- 일정 시간 동안 데이터가 없으면,  
    **운영체제(TCP 스택)**가 **확인용 패킷(Ping 같은 작은 패킷)**을 보냅니다.
- 상대방이 응답하면 → 연결은 **"살아있다"**로 판단되어 계속 유지됩니다.
- 상대방이 응답하지 않으면 → 일정 횟수 재시도 후에 **연결을 끊음** (OS 차원에서)

### 활용 상황

- 장시간 대기 상태의 연결 (ex: 채팅, 게임 서버, IoT)
- 방화벽이나 NAT가 **유휴 커넥션을 끊지 않게 방지**

### 주의

- **운영체제 설정에 의존**함 (기본값은 몇 시간 이상일 수 있음)
- 직접 설정해야 제대로 동작함 (ex: `tcp_keepalive_time`, `tcp_keepalive_intvl` 등