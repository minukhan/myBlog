## 옵티마이저란?

관련 개념: [[RDB 에서 페이징 쿼리가 필요한 이유]], [[NOT IN 쿼리를 사용할때 문제점]], [[MySQL]], [[PostgreSQL]], [[트랜잭션(Transaction)]]

- 데이터베이스 옵티마이저는 SQL을 어떻게 가장 빠르고 효율적으로 실행할지 판단해주는 뇌(두뇌) 같은 역할을 한다. 

> **SQL 쿼리를 실행하기 위한 최적의 실행 계획(Execution Plan)을 선택하는 DB 내부 컴포넌트**입니다.

### 예시

```
SELECT * FROM users WHERE age > 30;
```

- 이 쿼리를 처리할때 옵티마이저는 아래와 같이 여러가지 방법을 고민. 
- `users` 테이블을 처음부터 끝까지 다 훑을까? (Full Table Scan)
- `age`에 인덱스가 있다면 그걸 쓸까? (Index Scan)
- 어떤 조인 순서로 데이터를 결합할까?
- 병렬로 실행할 수 있을까?
	→ 이 중에서 가장 비용(시간, 자원 등)이 적게 드는 **실행 계획**을 선택합니다.
	

### 옵티마이저 종류 

| 유형              | 설명                                              |
| --------------- | ----------------------------------------------- |
| **규칙 기반 옵티마이저** | 고정된 규칙에 따라 실행 계획을 선택 (예: 인덱스 있으면 무조건 사용)        |
| **비용 기반 옵티마이저** | 통계 정보를 기반으로 실제 비용을 계산해서 결정 (**현대 DB 대부분 이 방식**) |
