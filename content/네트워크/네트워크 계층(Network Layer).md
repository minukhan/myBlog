> [!tldr] 개요
> 서로 다른 네트워크 간의 데이터 전송을 담당하는 핵심 계층

각 라우터에는 데이터 평면과 제어 평면이 존재한다.
1. **데이터 평면** : 입력 링크에서 출력 링크로 데이터그램을 전달
2. **제어 평면** : 데이터그램이 출발지 호스트에서 목적지 호스트까지 전달되게끔, 로컬 포워딩, 라우터별 포워딩을 대응시킴
### 포워딩과 라우팅
네트워크 계층의 근본적인 역할은 **송신 호스트에서 수신 호스트로 패킷을 전달**하는 것
#### 포워딩(전달)
- 패킷이 라우터의 입력 링크에 도달했을 때 라우터는 그 패킷을 적절한 출력 링크로 이동시켜야 함
- 포워딩은 데이터 평면에서 실행됨
- 매우 짧은 시간 단위(보통 나노초 단위)를 갖기에 대표적으로 하드웨어에서 실행
###### 포워딩 테이블

![](https://i.imgur.com/MdVX3mb.png)

- 라우터는 도착하는 패킷 헤더의 필드 값을 통해 포워딩 테이블의 내부 색인으로 사용하여 패킷을 전달
- 포워딩 테이블 엔트리에 **저장되어 있는 헤더의 값은 해당 패킷이 전달되어야 할 라우터의 외부 링크 인터페이스**를 나타낸다
#### 라우팅
- 송신자가 수신자에게 패킷을 전송할 때 네트워크 계층은 패킷 경로를 결정해야 함
	- 이러한 경로를 계산하는 알고리즘을 *라우팅 알고리즘*이라고 한다
- 시간이 오래 걸려 소프트웨어에서 실행
### 네트워크 서비스 모델
###### 네트워크 계층이 이론적으로 제공할 수 있는 서비스들
3. **보장된 전달**
    - 패킷이 100% 목적지에 도착하는 것을 보장
    - 즉, 패킷 손실이 절대 발생하지 않음
4. **지연 제한 이내의 보장된 전달**
    - 패킷이 반드시 도착할 뿐만 아니라
    - 정해진 시간(예: 100ms) 안에 도착하는 것을 보장
5. **순서화 패킷 전달**
    - 보낸 순서대로 패킷이 도착하는 것을 보장
    - 패킷 순서가 뒤바뀌지 않음
6. **최소 대역폭 보장**
    - 특정 속도(예: 1Mbps) 이상의 전송 속도를 보장
    - 송신자가 약속된 속도 이하로 데이터를 보내면 패킷 손실이 없음
7. **보안 서비스**
    - 네트워크 계층에서 데이터를 암호화하여 전송
    - 전송 중 데이터의 기밀성 보장
###### 인터넷의 네트워크 계층(IP)이 실제로 제공하는 서비스
**-> 최선형 서비스(Best-effort service)**
- [f] 위에 나열된 어떠한 보장도 제공하지 않음
- [f] 패킷을 전달하기 위해 *"최선을 다할 뿐"*
- [f] 패킷 손실 가능
- [f] 패킷 순서 뒤바뀜 가능
- [f] 지연 시간 보장 없음
- [f] 대역폭 보장 없음

---
## 라우터 내부에는 무엇이 있는가?

![](https://user-images.githubusercontent.com/76640167/212551546-16b6533b-58ec-421a-9863-e7d581e0cb41.png)
#### 입력 포트
![](https://user-images.githubusercontent.com/76640167/212552679-134bbf97-c8fd-452c-a6dc-283454e8d745.png)

- **물리 계층 기능을 수행**
- 가장 중요한 기능은 입력 포트의 가장 오른쪽에서 수행되는 **검색 기능**으로, 여기서 포워딩 테이블을 참조하여 도착된 패킷이 스위치 구조를 통해 **라우터 출력 포트를 결정**함
###### a. 목적지 주소 범위 포워딩 테이블
![](https://user-images.githubusercontent.com/76640167/212553661-aa22e2b5-353c-4cba-95e6-66ae79c2968e.png)
- 목적지 주소 범위로 포워딩 테이블을 구성한다
###### b. 프리 픽스 포워딩 테이블
![](https://user-images.githubusercontent.com/76640167/212553874-8c0c057e-f9a2-4533-bf21-c2196fa6e4fc.png)
- 목적지 주소의 **prefix**를 테이블의 엔트리와 매치

#### 스위치 구조
- 라우터의 입력 포트와 출력 포트를 연결
- 라우터 내부에 포함됨
- 교환 방식
	1. 메모리를 통한 교환
	2. 버스를 통한 교환
	3. 상호 연결 네트워크를 통한 교환
#### 출력 포트
![](https://user-images.githubusercontent.com/76640167/212600107-7721ba99-bd00-4f26-b815-cc9bb0324f23.png)
- 수신한 패킷을 저장하고 필요한 링크 계층 및 물리 계층 기능을 수행하여 **출력 링크로 패킷을 전송**
#### 라우팅 프로세서
- **제어평면 기능**을 수행
- 전통적인 라우터에서는 라우팅 프로토콜을 실행하고 라우팅 테이블과 연결된 링크 상태 정보를 유지 관리하며 라우터의 포워딩 테이블을 계산
- SDN 라우터에서 라우팅 프로세서는 원격 컨트롤러와 통신하여 원격 컨트롤러에서 계산된 포워딩 테이블 엔트리를 수신하고 라우터의 입력 포트에 이러한 엔트리를 설치

---
## 인터넷 프로토콜(IP)
[[IP|> IP 항목 참고]]

---
## SDN(Software-Defined Networking)

> [!note] SDN이란?
네트워크 관리 방식을 혁신적으로 변화시킨 접근 방식으로, 네트워크의 제어 평면(Control Plane)과 데이터 평면(Data Plane)을 분리하는 네트워크 아키텍처
### SDN의 기본 개념
- **제어 평면 분리**: 네트워크 장비의 제어 결정(라우팅, 정책 등)을 데이터 전송 기능으로부터 분리
- **중앙화된 제어**: 분리된 제어 평면을 중앙화된 컨트롤러로 통합 관리
- **프로그래밍 가능성**: API를 통해 네트워크 동작을 프로그래밍 방식으로 제어
- **개방형 표준**: 표준화된 프로토콜을 통한 상호 운용성 강화
### SDN 아키텍처의 주요 구성 요소
#### 1. 애플리케이션 계층
- 네트워크 서비스와 애플리케이션이 위치
- 라우팅, 보안, 로드 밸런싱 등의 기능 구현
- 노스바운드 API를 통해 컨트롤러와 통신
#### 2. 제어 계층
- SDN 컨트롤러가 위치
- 전체 네트워크의 추상화된 뷰 유지
- 네트워크 정책 시행 및 네트워크 장치 제어
- 노스바운드 API(북쪽)와 사우스바운드 API(남쪽) 제공
#### 3. 인프라 계층
- 실제 네트워크 장비(스위치, 라우터 등)가 위치
- 데이터 전송만 담당
- 사우스바운드 API를 통해 컨트롤러의 지시를 받음
### SDN 프로토콜
#### OpenFlow
- 가장 널리 알려진 SDN 사우스바운드 프로토콜
- 컨트롤러와 네트워크 장비 간의 통신을 정의
- 플로우 테이블을 통한 패킷 처리 규칙 설정
- TCP/TLS를 통한 안전한 통신
### SDN의 장점
8. **중앙화된 네트워크 관리**: 전체 네트워크를 중앙에서 통합 관리
9. **네트워크 자동화**: 반복적인 작업 자동화로 운영 효율성 증가
10. **비용 절감**: 하드웨어 의존성 감소 및 운영 비용 절감
11. **유연성 및 프로그래밍 가능성**: 네트워크 동작을 실시간으로 프로그래밍
12. **혁신 촉진**: 새로운 네트워크 서비스 빠른 개발 및 배포
13. **멀티벤더 환경 지원**: 표준화된 인터페이스로 다양한 벤더 장비 통합 관리
### SDN의 과제와 한계
14. **중앙화된 컨트롤러의 단일 장애점(SPOF) 위험**
15. **보안 문제**: 컨트롤러가 공격 대상이 될 수 있음
16. **성능과 확장성 문제**: 대규모 네트워크에서의 컨트롤러 성능
17. **기존 네트워크와의 통합 및 마이그레이션 어려움**
18. **기술 성숙도와 표준화 과정**