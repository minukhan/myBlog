> [!tldr] UDP(User Datagram Protocol)이란?
> 전송 계층에서 사용되는 비연결형 프로토콜로, [[TCP]]와 함께 가장 널리 사용되는 전송 프로토콜 중 하나

- [I] UDP는 [[전송 계층(Transport Layer)]] 프로토콜이 할 수 있는 최소 기능으로 동작한다.
	- 다중화/역다중화 기능
	- 간단한 오류 검사 기능
이외에는 IP에 **아무것도 추가하지 않는다**
## 동작 순서
1. 애플리케이션 프로세스로부터 메시지를 가져와, 다중화/역다중화 서비스에 필요한 (출발지 포트 번호, 목적지 포트 번호)를 첨부한다
2. 출발지 호스트의 IP 주소와 목적지 호스트의 IP 주소 필드를 추가하고, 전송 계층 세그먼트를 네트워크 계층으로 넘긴다
3. 네트워크 계층은 전송 계층 세그먼트를 IP 데이터그램으로 캡슐화하고 수신 호스트에게 전달한다
4. 세그먼트가 수신 호스트에 도착하면, UDP는 세그먼트의 데이터를 해당하는 애플리케이션 프로세스로 전달하기 위해 목적지 포트 번호를 사용한다
#### [[DNS(Domain Name System)]]
- DNS는 전형적으로 UDP를 사용하는 애플리케이션 계층 프로토콜의 예이다
- 만약 질의 호스트가 응답을 수신하지 못하면 질의를 다른 네임서버로 송신하거나, 애플리케이션에게 응답을 수신할 수 없음을 통보한다
## UDP의 장점
#### 무슨 데이터를 언제 보낼지에 대해, 애플리케이션 레벨에서 더 정교한 제어가 가능
- 애플리케이션 프로세스가 데이터를 UDP에 전달하자마자, 즉시 UDP 세그먼트로 만들고, 그 세그먼트를 네트워크 계층으로 곧바로 전달한다.
- 즉, **실시간**을 지키기에 좋다
#### 연결 설정이 없다
- [[TCP#3-way Handshake|3-way Handshake]]와 같은 사전준비 없이 전송하므로, 연결을 설정하기 위한 어떤 지연도 없다
- UDP는 연결 상태를 유지하지 않으며, 연결 상태에 대한 그 어떤 파라미터도 기록하지 않는다 -> 좀 더 많은 활성화된 클라이언트를 수용할 수 있다
#### 패킷 헤드가 작다
- TCP는 최소 20Bytes의 헤더 오버헤드를 갖지만, UDP는 단지 고정 8Bytes뿐이다
## UDP의 단점
#### [[TCP#혼잡 제어(Congestion Control)|혼잡 제어(Congestion Control)]]를 하지 않는다

> [!important] 혼잡제어
> 혼잡제어는 네트워크가 꼭 필요한 작업을 할 수 없게 되는 폭주상태를 막기 위해 반드시 필요하다
## UDP 세그먼트 구조

![](https://i.imgur.com/fy5HtTA.png)
- 8Bytes의 고정길이 헤더를 갖는다
- `Source port #`, `Dest. port #` : 출발지, 목적지 포트 번호를 갖는다
- `Length` : 헤더를 포함하는 UDP 세그먼트의 길이를 바이트 단위로 나타낸다
- `Checksum` : 세그먼트에 오류가 발생했는지 검사하기 위해 사용한다. 오류 검출은 되지만,  자체적인 회복은 되지 않는다.