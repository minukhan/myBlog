
## 작업지시 목록이 느림(N+1)

## 상황

- **오늘 작업목록** 화면을 위한 API가 `작업지시 → 품목 → 로케이션` 정보를 합쳐서 내려줘야 함.
- 각 도메인 데이터가 **서로 다른 서비스/테이블**에 있어, 목록(예: 100건)을 한 건씩 순회하며 추가 조회를 수행하는 코드 경로가 존재.
- 부하 테스트를 진행하여 동시에 접근하도록 테스트를 하던 도중 목록 API 지연이 체감됨.

## 문제점

- 한 건씩 DB에 물어보는 **N+1 쿼리 패턴**으로 인해 **응답 2~3초**까지 증가.
- 현장 근무자 앱에서 목록 렌더링이 지연되어 **작업 시작이 늦어짐**.

## 해결 방법

1. **배치 조회로 전환(한 번에 가져오기)**
    - ID 목록을 모아 **IN 쿼리** 또는 **일괄 조인**으로 재구성.

## 느낀점

- **N+1은 구조적 문제**: 비즈니스 로직이 나뉘어 있어도, **읽기 경로**는 처음부터 배치/조인 관점으로 설계해야 함.