
### 세그멘테이션과 페이징의 차이점
##### 페이징?

- 논리적 주소 공간을 나눈 고정된 크기의 단위.(그냥 페이지처럼 딱 나눠놓은것)
- 내부단편화

![](https://i.imgur.com/YHpBNyc.png)
##### 세그멘테이션?

- 논리적 주소공간을 고정이 아니라 가변적인 크기인 세그먼트로 나눈다. 
- 세그먼트는 코드, 데이터, 스택 등 논리적 단위로 구분된다. 
- 외부단편화

![](https://i.imgur.com/Gbi4MSA.png)




### 여기서 혼동 단어 정리

 ##### 페이지?
- 논리적 주소 공간을 나눈 고정된 크기의 단위.

프레임? 
- 물리적 메모리를 나눈 고정된 크기의 단위.

- 페이지와 프레임은 1:1 대응 관계를 가진다.
- 여기서 페이지 테이블은 논리적 주소의 페이지가 물리적 메모리의 어느 프레임에 있는지 알려주는 역할을 한다. 

알아둘것
- 페이지와 프레임의 크기는 항상 같다. 

![](https://i.imgur.com/zZ0Kcvt.png)

### 페이지에서 실제 주소 가져오는 과정??

- cpu가 논리적 주소를 생성. 
- 페이지 테이블 참조 (MMU) 가 페이지 번호를 사용하여 페이지 테이블을 참조. 
- 페이지 테이블에서 해당 페이지의 프레임 번호를 얻는다. 
- 프레임 번호와 오프셋을 조합해서 물리적 주소를 생성한다. 

### 주소공간의 수정 가능성을 확인하는 방법??

- 페이지 테이블 엔트리(PTE) 에는 접근 권한 비트가 있다. 
- 운영체제가 이 비트를 설정해서 프로세스가 쓸 수 있게끔 할지, 읽기만하게 할지 이런거 제한하는것. 


### C/C++ 개발을 하게 되면 Segmentation Fault 라는 에러를 접한다. 왜??

- Segmentation Fault 는 프로그램이 허용되지 않은 메모리 영역에 접근하려 할 때 발생하는 에러. 
- 존재하지 않는 페이지 번호에 접근할경우.
- 읽기 전용 페이지에 쓰기 작업을 시도하면 페이지 테이블의 접근 권한 비트가 이를 감지 후 트랩 발생.

###### 그냥 단순하게 이상한 메모리에 접근하려고 하거나 권한 없을떄 발생한다고 보면 될듯. 


### 그러면 세그멘테이션 방식을 사용하면 가상 메모리 사용 불가능??

- 결론은 가능. 

> [!important] 가상 메모리가 가능한 핵심적인 이유는??
> 
> 전체 프로그램이 한 번에 물리적 메모리에 올라올 필요가 없다. 라는점.


### 알아둘것

- 세그멘테이션 방식만을 사용하면 고정된 크기의 프레임은 사용되지 않는다. 
- 세그먼트 자체가 가변적인 크기를 가지기 때문. 
- 근데 보통은 세그멘테이션과 페이징을 결합한 혼합 방식을 사용한다고 함. 
