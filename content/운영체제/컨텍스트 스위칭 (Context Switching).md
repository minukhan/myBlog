
### 컨텍스트 스위칭이란? 

- CPU가 현재 실행 중인 프로세스, 스레드를 다른걸로 교체하는 과정을 말함. 
	- 멀티테스킹이 목적임. 
	- CPU 효율 극대화시킨다. 

- 컨텍스트 스위칭 과정에서는 CPU 상태와, 레지스터 값, 스택포인터, 프로그램 카운터 등이 저장되고 복원된다. 

### 프로세스와 스레드 차이점? 

- 프로세스
	- 프로세스는 일단 독립적인 주소공간을 가지고 있습니다.
	- 그래서 컨텍스트 스위칭 하는데 무겁다. 
	- 각각 PCB 가 있어서 관리한다. 

- 스레드 
	- 스레드는 독립적인 주소공간은 stack 밖에 없다. 
	- 그래서 동일한 프로세스에 있는 메모리를 공유를 하며 데이터 일관성을 보장하는게 중요하다. 
	- 프로세스보단 가볍다. 


### 기존 프로세스 정보 저장하는 방식? 

- 만약 컨텍스트 스위칭을 하면 OS는 커널 스택에 정보를 저장한다.
	- CPU 레지스터값.
	- PCB 포인터
	- 커널모드로 진입할때 사용된 함수 정보 커널 스택에 저장. 

- 커널 스택에 CPU 레지스터와 커널 모드 상태가 저장되고 PCB에는 프로세스의 모든 관리 정보가 저장된다. 

### 컨텍스트 스위칭 발생 지점? 

- 단기 스케줄러가 CPU를 다른 Ready 프로세스에게 할당할때 
- 블록 이벤트( I/O, 잠금 ) 발생했을때
- 프로세스가 종료됐을때.
- 우선순이가 변화되었을 때
- 커널이 호출했을 때 

### 프로세스 스케줄링 알고리즘

##### RR(Round Robin) 스케줄링과 Time Slice Trade-off

- RR : 각 프로세스에게 일정한 time slice 를 주고 순환하면서 CPU를 할당하는 것 .
	- time slice 가 작을수록 응답속도가 빨라짐. 
		- 그러나 컨텍스트 스위칭이 너무 많이 일어나서 오버헤드가 증가한다. 
	- 응답속도가 늦어진다. 

- time slice 를 적절하게 중간값으로 잘 설정하는게 중요하다. 


### 싱글 스레드 CPU 에서 상시로 돌아가야하는 프로세스가 있다면 어떤 알고리즘을 선택하는게 좋을까? 

##### 1. RR 
##### 2. 우선순위 스케쥴링 

- 상시로 CPU 점유율 조절이 필요하다. 
- 응답속도를 너무 늦출 수 없기 때문에 RR 로 다른 중요한 작업도 공정하게 수행한다. 
- Priority 기반으로 시스템 중요도에 따라서 CPU를 조절해야한다. 


### 동시성과 병렬성의 차이점이 뭔가? 

- 동시성 : 여러 작업이 시간적으로 겹치게 실행되는 것 처럼 처리하는걸 말한다. 
	- 싱글 CPU 에서 스케줄링으로 여러 프로세스를 번갈아 실행하는것.
	- 시간을 쪼개서 처리하는것 (RR)

- 병렬성 : 여러 작업을 동시에 실행하는것. 
	- CPU 가 여러개이고 이것들을 병렬적으로 처리를 하는 것. 
	- 여러개의 CPU로 처리를 하는 차이점. 


### Multi-Level Feedback Queue(MLFQ) 의 장점? 

- 여러개의 우선순위 큐를 계층적으로 쌓아 둔다. 
- 그리고 상황에 맞게 우선순위를 조정하면서 CPU 에게 할당해주는 알고리즘. 
- 입출력 과정이 많은 작업을 먼저 우선순위를 두고 처리한다.
	- 그 이유? : 빠르게 CPU 작업을 처리할 수 있기 때문. 

- 반응성 문제가 좋음. 
	- 사용자와 소통이 많은 프로세스는 빠른 반응이 필요하다. 
	- 짧은 Time Slice 와 높은 우선순위 큐를 배치해둠. 
		- RR, FCFS 에서는 이런 실시간 보장이 어렵고 느끼는 반응속도 처리가 다름. 

- 기아문제 방지. 
	- 낮은 우선순위 작업을 영원히 안할 수 있음. 계속 높은게 들어오면. 


### FIFO 스케쥴러가 정말 쓸모없을까? 어떤곳에 쓰이면 좋을까? 

- 단순하고 구현이 쉽다. 
- 프로세스 간 우선순위나 요구량을 고려하지 않는다. 
- 실시간 반응성이 필요 없는 환경에서 유용하게 쓰인다.
	- 그 이유? 비용이 별로 안든다. 
	- 단순 큐 관리만 하면 되므로 컨텍스트 스위칭이나 우선순위 계산 부담이 거의 없음. 
	- 예측 가능하다. 먼저 들어온게 먼저 끝나니까 작업 순서를 쉽게 예측할 수 있음. 


### 스케줄링 알고리즘을 프로세스 스케줄링 알고리즘 이라고 부른다. 스레드는 다른방식으로 스케줄링 하나? 

- 스레드도 Ready -> Running -> Waiting 으로 상태전환이 존재한다. 

- 차이점?
	- 프로세스는 독립적인 주소공간과 PCB를 관리하고 컨텍스트 스위칭 비용이 크다. 
	- 그러나 스레드는 프로세스 내 주소공간을 공유하고 컨텍스트 스위칭 비용이 낮음. 
- 스케줄링 방식
	- 스레드도 프로세스와 비슷한 스케줄링 알고리즘을 사용한다. 
	- 멀티 스레드 환경에서는 스레드 단위로 스케줄링함. 
	- 컨텍스트 스위칭 비용과 주소공간 공유 라는 장점을 들고 더 효율적인 전략을 사용한다. 
		- 간단하게 프로세서 선호도라는게 있음.
		- 스케줄러가 특정 스레드를 가능하면 이전에 실행됐던 CPU 코어에 다시 할당하려는 경향이 있음 왜?
			- 관련된 데이터가 해당 코어의 캐시 메모리에 저장된다. 그래서 캐시 히트를 노려서 성능을 강화하는 그런것들이 있다고 함. 


### 유저 스레드와 커널 스레드의 스케쥴링 알고리즘은 같을까?

- 결론적으로 다르다. 

- 스케줄링 주체와 고려하는 정보의 범위가 완전히 다르다. 
- 유저 스레드의 스케줄링은 프로세스 내부의 규칙. 
- 커널 스레드의 스케줄링은 운영체제 전체의 규칙이다. 

#### 유저 수준 스레드 

- 운영체제가 아닌 사용자 영역의 스레드 라이브러리가 담당합니다. 
- 프로세스 내부의 효율성에 맞춰져 있다. 

#### 커널 수준 스레드 

- 운영체제가 담당하면서 
- 시스템 전체의 성능, 공정성, 효율성에 초점이 맞춰져 있습니다. 