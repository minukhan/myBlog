

### IPC란?

관련 개념: [[프로세스]], [[Thread Safe]], [[뮤텍스와 세마포 차이점]], [[시스템 콜(System Call)]] 

- 말 그대로 프로세스 간의 통신을 의미한다. 
- 데이터를 주고받고 공유하는 매커니즘을 말함. 
- 독립된 메모리 공간을 할당하기 때문에 직접 다른 프로세스의 메모리에 참조는 못함. 
- 그래서 커널이 제공하는 특별한 방법을 사용해야하는데 그게 IPC


### 다양한 종류??

- 파이프 
	- 단방향 통신 채널.
	- 한 프로세스의 출력이 다른 프로세스의 입력으로 연결.
- 명명된 파이프 
	- 관련없는 프로세스들 사이에서 통신할 수 있게끔
	- 파이프에 파일 시스템 이름을 뭍인 것. 
- 메시지 큐 
	- 메시지를 큐 자료구조 형태로 관리하는 방식. 
	- 보내는 쪽은 메시지를 넣고, 받는 쪽은 메시지를 꺼내감. 
- 공유 메모리
	- 여러 프로세스가 하나의 메모리 공간을 공유하는 방식. 
	- 커널의 개입없이 메모리에 직접 접근하므로 IPC 기법중에서 가장 빠르다!
- 세마포어 
	- 공유자원에 대한 접근을 제어, 공유메모리의 동기화 문제를 해결
- 소켓
	- 네트워크 통신을 위한 IPC 기법. 
	- 동일한 컴퓨터 내의 프로세스 뿐 아니라, 원격에 있는 컴퓨터의 프로세스와도 통신가능. 



### 공유메모리의 유의점

- IPC 거치지 않고 바로 메모리에 직접 접근하니까 빠름. 
- 특정 메모리 공간을 열어두고 여러 프로세스가 사용하면서 값을 변경한다면 다양한 문제가 생김. 
- 동기화문제! 동시에 변경하면 어떻게 할껀가?
	- 세마포어, 뮤텍스같은 동기화 기법을 사용해야함. 
	- 특정 프로세스가 접근하면 lock 을 걸어 막고. 끝나면 해제하고 이런식으로 순서를 보장

### 메시지 큐의 단방향성

- 메시지 큐는 비동기적인 메시지를 전달하기 위한 메커니즘. 
- 일반적으로 단방향으로 간주. 
- 생상자 프로세스는 큐에 메시지를 보내는 역할만 함. 
- 소비자 프로세스는 큐에서 메시지를 가져오는 역할만하기 때문에 단방향으로 보는 것. 
- 하나의 흐름으로만 이루어진다!

##### 그러면 양방향 어케함??

- 2개의 메시지 큐를 사용하면 쉽게 양방향 통신을 구현할 수 있다!

- **큐 1**: 프로세스 A → 프로세스 B 로의 메시지 전달
- **큐 2**: 프로세스 B → 프로세스 A 로의 메시지 전달

- 한쪽 큐에서는 읽기만
- 다른 큐에서는 쓰기만 
- 이렇게 2개를 두면 양방향 통신이 가능하다.
- 그래서 정리하면 메시지큐는 단방향 채널을 기본으로 하지만 이를 조합해서 양방향 통신을 구현하는게 일반적이다. 
